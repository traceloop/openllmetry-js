{
  "log": {
    "_recordingName": "Test AI SDK Agent Integration with Recording/should properly scope agent names in nested agent scenarios",
    "creator": {
      "comment": "persister:fs",
      "name": "Polly.JS",
      "version": "6.0.6"
    },
    "entries": [
      {
        "_id": "53958e2e902842bc98936fab6e391d61",
        "_order": 0,
        "cache": {},
        "request": {
          "bodySize": 510,
          "cookies": [],
          "headers": [
            {
              "name": "content-type",
              "value": "application/json"
            }
          ],
          "headersSize": 165,
          "httpVersion": "HTTP/1.1",
          "method": "POST",
          "postData": {
            "mimeType": "application/json",
            "params": [],
            "text": "{\"model\":\"gpt-4o-mini\",\"input\":[{\"role\":\"user\",\"content\":[{\"type\":\"input_text\",\"text\":\"Use the inner agent tool to help answer: What is 2+2?\"}]}],\"tools\":[{\"type\":\"function\",\"name\":\"innerAgentTool\",\"description\":\"Calls an inner agent to perform a subtask\",\"parameters\":{\"type\":\"object\",\"properties\":{\"query\":{\"type\":\"string\",\"description\":\"Query for the inner agent\"}},\"required\":[\"query\"],\"additionalProperties\":false,\"$schema\":\"http://json-schema.org/draft-07/schema#\"},\"strict\":false}],\"tool_choice\":\"auto\"}"
          },
          "queryString": [],
          "url": "https://api.openai.com/v1/responses"
        },
        "response": {
          "bodySize": 1859,
          "content": {
            "mimeType": "application/json",
            "size": 1859,
            "text": "{\n  \"id\": \"resp_0b139cc2307d8ddf0069388b8e21948197800dbbb8decfac25\",\n  \"object\": \"response\",\n  \"created_at\": 1765313422,\n  \"status\": \"completed\",\n  \"background\": false,\n  \"billing\": {\n    \"payer\": \"developer\"\n  },\n  \"error\": null,\n  \"incomplete_details\": null,\n  \"instructions\": null,\n  \"max_output_tokens\": null,\n  \"max_tool_calls\": null,\n  \"model\": \"gpt-4o-mini-2024-07-18\",\n  \"output\": [\n    {\n      \"id\": \"fc_0b139cc2307d8ddf0069388b8f34108197a73c18bff4deedbe\",\n      \"type\": \"function_call\",\n      \"status\": \"completed\",\n      \"arguments\": \"{\\\"query\\\":\\\"What is 2 + 2?\\\"}\",\n      \"call_id\": \"call_i0QyLcK3c2KuxopFDrmgLxId\",\n      \"name\": \"innerAgentTool\"\n    }\n  ],\n  \"parallel_tool_calls\": true,\n  \"previous_response_id\": null,\n  \"prompt_cache_key\": null,\n  \"prompt_cache_retention\": null,\n  \"reasoning\": {\n    \"effort\": null,\n    \"summary\": null\n  },\n  \"safety_identifier\": null,\n  \"service_tier\": \"default\",\n  \"store\": true,\n  \"temperature\": 1.0,\n  \"text\": {\n    \"format\": {\n      \"type\": \"text\"\n    },\n    \"verbosity\": \"medium\"\n  },\n  \"tool_choice\": \"auto\",\n  \"tools\": [\n    {\n      \"type\": \"function\",\n      \"description\": \"Calls an inner agent to perform a subtask\",\n      \"name\": \"innerAgentTool\",\n      \"parameters\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"query\": {\n            \"type\": \"string\",\n            \"description\": \"Query for the inner agent\"\n          }\n        },\n        \"required\": [\n          \"query\"\n        ],\n        \"additionalProperties\": false\n      },\n      \"strict\": false\n    }\n  ],\n  \"top_logprobs\": 0,\n  \"top_p\": 1.0,\n  \"truncation\": \"disabled\",\n  \"usage\": {\n    \"input_tokens\": 65,\n    \"input_tokens_details\": {\n      \"cached_tokens\": 0\n    },\n    \"output_tokens\": 23,\n    \"output_tokens_details\": {\n      \"reasoning_tokens\": 0\n    },\n    \"total_tokens\": 88\n  },\n  \"user\": null,\n  \"metadata\": {}\n}"
          },
          "cookies": [
            {
              "domain": ".api.openai.com",
              "httpOnly": true,
              "name": "_cfuvid",
              "path": "/",
              "sameSite": "None",
              "secure": true,
              "value": "OQ0Ycv9Yez8k.2eMVLjB4Kw0zsRG0OqdRBVyNCaR8Ss-1765313423740-0.0.1.1-604800000"
            }
          ],
          "headers": [
            {
              "name": "alt-svc",
              "value": "h3=\":443\"; ma=86400"
            },
            {
              "name": "cf-cache-status",
              "value": "DYNAMIC"
            },
            {
              "name": "cf-ray",
              "value": "9ab75fd4ef960dd4-TLV"
            },
            {
              "name": "connection",
              "value": "keep-alive"
            },
            {
              "name": "content-encoding",
              "value": "br"
            },
            {
              "name": "content-type",
              "value": "application/json"
            },
            {
              "name": "date",
              "value": "Tue, 09 Dec 2025 20:50:23 GMT"
            },
            {
              "name": "openai-organization",
              "value": "traceloop"
            },
            {
              "name": "openai-processing-ms",
              "value": "1545"
            },
            {
              "name": "openai-project",
              "value": "proj_tzz1TbPPOXaf6j9tEkVUBIAa"
            },
            {
              "name": "openai-version",
              "value": "2020-10-01"
            },
            {
              "name": "server",
              "value": "cloudflare"
            },
            {
              "name": "set-cookie",
              "value": "_cfuvid=OQ0Ycv9Yez8k.2eMVLjB4Kw0zsRG0OqdRBVyNCaR8Ss-1765313423740-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None"
            },
            {
              "name": "strict-transport-security",
              "value": "max-age=31536000; includeSubDomains; preload"
            },
            {
              "name": "transfer-encoding",
              "value": "chunked"
            },
            {
              "name": "x-content-type-options",
              "value": "nosniff"
            },
            {
              "name": "x-envoy-upstream-service-time",
              "value": "1548"
            },
            {
              "name": "x-ratelimit-limit-requests",
              "value": "30000"
            },
            {
              "name": "x-ratelimit-limit-tokens",
              "value": "150000000"
            },
            {
              "name": "x-ratelimit-remaining-requests",
              "value": "29999"
            },
            {
              "name": "x-ratelimit-remaining-tokens",
              "value": "149999717"
            },
            {
              "name": "x-ratelimit-reset-requests",
              "value": "2ms"
            },
            {
              "name": "x-ratelimit-reset-tokens",
              "value": "0s"
            },
            {
              "name": "x-request-id",
              "value": "req_a10ea6048929476195f4d8f4403084b2"
            }
          ],
          "headersSize": 958,
          "httpVersion": "HTTP/1.1",
          "redirectURL": "",
          "status": 200,
          "statusText": "OK"
        },
        "startedDateTime": "2025-12-09T20:50:21.370Z",
        "time": 2217,
        "timings": {
          "blocked": -1,
          "connect": -1,
          "dns": -1,
          "receive": 0,
          "send": 0,
          "ssl": -1,
          "wait": 2217
        }
      },
      {
        "_id": "2ac272d37de5b31a008d2279f5ee83a1",
        "_order": 0,
        "cache": {},
        "request": {
          "bodySize": 131,
          "cookies": [],
          "headers": [
            {
              "name": "content-type",
              "value": "application/json"
            }
          ],
          "headersSize": 165,
          "httpVersion": "HTTP/1.1",
          "method": "POST",
          "postData": {
            "mimeType": "application/json",
            "params": [],
            "text": "{\"model\":\"gpt-4o-mini\",\"input\":[{\"role\":\"user\",\"content\":[{\"type\":\"input_text\",\"text\":\"Inner agent processing: What is 2 + 2?\"}]}]}"
          },
          "queryString": [],
          "url": "https://api.openai.com/v1/responses"
        },
        "response": {
          "bodySize": 1457,
          "content": {
            "mimeType": "application/json",
            "size": 1457,
            "text": "{\n  \"id\": \"resp_08eddbace99c541a0069388b8fe224819482c6fd251ddea5d5\",\n  \"object\": \"response\",\n  \"created_at\": 1765313423,\n  \"status\": \"completed\",\n  \"background\": false,\n  \"billing\": {\n    \"payer\": \"developer\"\n  },\n  \"error\": null,\n  \"incomplete_details\": null,\n  \"instructions\": null,\n  \"max_output_tokens\": null,\n  \"max_tool_calls\": null,\n  \"model\": \"gpt-4o-mini-2024-07-18\",\n  \"output\": [\n    {\n      \"id\": \"msg_08eddbace99c541a0069388b9091a881948e9c3c96f0c663f7\",\n      \"type\": \"message\",\n      \"status\": \"completed\",\n      \"content\": [\n        {\n          \"type\": \"output_text\",\n          \"annotations\": [],\n          \"logprobs\": [],\n          \"text\": \"2 + 2 equals 4.\"\n        }\n      ],\n      \"role\": \"assistant\"\n    }\n  ],\n  \"parallel_tool_calls\": true,\n  \"previous_response_id\": null,\n  \"prompt_cache_key\": null,\n  \"prompt_cache_retention\": null,\n  \"reasoning\": {\n    \"effort\": null,\n    \"summary\": null\n  },\n  \"safety_identifier\": null,\n  \"service_tier\": \"default\",\n  \"store\": true,\n  \"temperature\": 1.0,\n  \"text\": {\n    \"format\": {\n      \"type\": \"text\"\n    },\n    \"verbosity\": \"medium\"\n  },\n  \"tool_choice\": \"auto\",\n  \"tools\": [],\n  \"top_logprobs\": 0,\n  \"top_p\": 1.0,\n  \"truncation\": \"disabled\",\n  \"usage\": {\n    \"input_tokens\": 19,\n    \"input_tokens_details\": {\n      \"cached_tokens\": 0\n    },\n    \"output_tokens\": 9,\n    \"output_tokens_details\": {\n      \"reasoning_tokens\": 0\n    },\n    \"total_tokens\": 28\n  },\n  \"user\": null,\n  \"metadata\": {}\n}"
          },
          "cookies": [
            {
              "domain": ".api.openai.com",
              "httpOnly": true,
              "name": "_cfuvid",
              "path": "/",
              "sameSite": "None",
              "secure": true,
              "value": "LUVLW9aRhycZ3UL3jCqraiJkiSa7uw1H_4xR83fYods-1765313424872-0.0.1.1-604800000"
            }
          ],
          "headers": [
            {
              "name": "alt-svc",
              "value": "h3=\":443\"; ma=86400"
            },
            {
              "name": "cf-cache-status",
              "value": "DYNAMIC"
            },
            {
              "name": "cf-ray",
              "value": "9ab75fe299a50dd4-TLV"
            },
            {
              "name": "connection",
              "value": "keep-alive"
            },
            {
              "name": "content-encoding",
              "value": "br"
            },
            {
              "name": "content-type",
              "value": "application/json"
            },
            {
              "name": "date",
              "value": "Tue, 09 Dec 2025 20:50:24 GMT"
            },
            {
              "name": "openai-organization",
              "value": "traceloop"
            },
            {
              "name": "openai-processing-ms",
              "value": "921"
            },
            {
              "name": "openai-project",
              "value": "proj_tzz1TbPPOXaf6j9tEkVUBIAa"
            },
            {
              "name": "openai-version",
              "value": "2020-10-01"
            },
            {
              "name": "server",
              "value": "cloudflare"
            },
            {
              "name": "set-cookie",
              "value": "_cfuvid=LUVLW9aRhycZ3UL3jCqraiJkiSa7uw1H_4xR83fYods-1765313424872-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None"
            },
            {
              "name": "strict-transport-security",
              "value": "max-age=31536000; includeSubDomains; preload"
            },
            {
              "name": "transfer-encoding",
              "value": "chunked"
            },
            {
              "name": "x-content-type-options",
              "value": "nosniff"
            },
            {
              "name": "x-envoy-upstream-service-time",
              "value": "925"
            },
            {
              "name": "x-ratelimit-limit-requests",
              "value": "30000"
            },
            {
              "name": "x-ratelimit-limit-tokens",
              "value": "150000000"
            },
            {
              "name": "x-ratelimit-remaining-requests",
              "value": "29999"
            },
            {
              "name": "x-ratelimit-remaining-tokens",
              "value": "149999960"
            },
            {
              "name": "x-ratelimit-reset-requests",
              "value": "2ms"
            },
            {
              "name": "x-ratelimit-reset-tokens",
              "value": "0s"
            },
            {
              "name": "x-request-id",
              "value": "req_b95130885e00480aabe6235b03ecf589"
            }
          ],
          "headersSize": 956,
          "httpVersion": "HTTP/1.1",
          "redirectURL": "",
          "status": 200,
          "statusText": "OK"
        },
        "startedDateTime": "2025-12-09T20:50:23.595Z",
        "time": 1118,
        "timings": {
          "blocked": -1,
          "connect": -1,
          "dns": -1,
          "receive": 0,
          "send": 0,
          "ssl": -1,
          "wait": 1118
        }
      }
    ],
    "pages": [],
    "version": "1.2"
  }
}
